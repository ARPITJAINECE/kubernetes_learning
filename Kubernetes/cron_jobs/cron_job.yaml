apiVersion: batch/v1
kind: CronJob
metadata:
  name: example-cronjob

spec:                            # (1) CronJob-level spec
  schedule: "*/5 * * * *"
  successfulJobsHistoryLimit: 3
  failedJobsHistoryLimit: 2
  jobTemplate:                   # (2) Job template spec starts here
    spec:                        # (3) Job-level spec
      template:                  # (4) Pod template spec
        spec:
          containers:
            - name: hello
              image: busybox
              command: ["sh", "-c", "echo Hello from CronJob"]
          restartPolicy: Never



# 3 specs : 
# CronJob
#  â””â”€â”€ Job (created at schedule time)
#        â””â”€â”€ Pod (runs your container)






# schedule: "*/5 * * * *"
# Run every 5 minutes.

# ðŸ”¹ successfulJobsHistoryLimit: 3
# Keep last 3 successful Job records.

# ðŸ”¹ failedJobsHistoryLimit: 2
# Keep last 2 failed Job records.



# ðŸ”¹ jobTemplate.spec.completions (optional)
# How many pods must finish.

# ðŸ”¹ jobTemplate.spec.parallelism (optional)
# How many pods run at same time.